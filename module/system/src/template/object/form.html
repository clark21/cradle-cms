<div class="panel panel-default clear" >
    <div class="panel-heading brand">
        <div class="panel-title">{{title}}</div>
    </div>

    <div class="panel-body" >
        <form
            method="post"
            {{#if cdn_config}}
                data-do="cdn-upload"
                data-on="submit"
                data-progress="{{_ 'We are uploading your files. Please do not refresh page.'}}"
                data-complete="{{_ 'Upload Complete'}}"
                data-enctype="{{cdn_config.form.enctype}}"
                data-method="{{cdn_config.form.method}}"
                data-action="{{cdn_config.form.action}}"
                data-cdn="{{cdn_config.form.action}}"
                data-acl="{{cdn_config.inputs.acl}}"
                data-key="{{cdn_config.inputs.key}}"
                data-credential="{{cdn_config.inputs.X-Amz-Credential}}"
                data-algorythm="{{cdn_config.inputs.X-Amz-Algorithm}}"
                data-date="{{cdn_config.inputs.X-Amz-Date}}"
                data-policy="{{cdn_config.inputs.Policy}}"
                data-signature="{{cdn_config.inputs.X-Amz-Signature}}"
            {{/if}}
        >
            {{#each schema.fields}}
                {{#in field.type 'none,hide,active,created,updated'}}
                {{else}}
                    <div class="form-group{{#in @key ../errors}} has-error{{/in}}">
                        <label class="control-label">{{label}}</label>
                        <div>
                            {{#when field.type '===' 'text'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="text"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'email'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="email"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'password'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="password"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'search'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="search"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'url'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="url"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'color'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="color"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'format'}}
                            {{/when}}
                            {{#when field.type '===' 'slug'}}
                            {{/when}}
                            {{#when field.type '===' 'textarea'}}
                                <textarea
                                    class="form-control"
                                    name="{{@key}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                >{{{key @key ../item}}}</textarea>
                            {{/when}}
                            {{#when field.type '===' 'wysiwyg'}}
                                <textarea
                                    class="form-control"
                                    data-do="wysiwyg"
                                    name="{{@key}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                >{{{key @key ../item}}}</textarea>
                            {{/when}}
                            {{#when field.type '===' 'number'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="number"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'small'}}
                                <input
                                    class="form-control"
                                    max="9"
                                    min="0"
                                    name="{{@key}}"
                                    step="1"
                                    type="number"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'range'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="range"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'float'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    step="0.00001"
                                    type="number"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'price'}}
                                <input
                                    class="form-control"
                                    min="0"
                                    name="{{@key}}"
                                    step="0.01"
                                    type="number"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'date'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="date"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'time'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="time"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'datetime'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="datetime-local"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'week'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="week"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'month'}}
                                <input
                                    class="form-control"
                                    name="{{@key}}"
                                    type="month"
                                    value="{{key @key ../item}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'checkbox'}}
                                <input
                                    name="{{@key}}"
                                    type="hidden"
                                    value="0"
                                />
                                <input
                                    name="{{@key}}"
                                    type="checkbox"
                                    value="1"
                                    {{#when ../item @key '==' 1}}checked{{/when}}
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                />
                            {{/when}}
                            {{#when field.type '===' 'switch'}}
                            {{/when}}
                            {{#when field.type '===' 'select'}}
                                <select
                                    class="form-control"
                                    name="{{@key}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                >
                                    {{#each field.options}}
                                        <option
                                            value="{{./key}}"
                                            {{#when ../../item ../@key '==' key}}selected{{/when}}
                                        >
                                            {{value}}
                                        </option>
                                    {{/each}}
                                </select>
                            {{/when}}
                            {{#when field.type '===' 'checkboxes'}}
                                <div{{#each field.attributes}} {{@key}}="{{this}}"{{/each}}>
                                    {{#each field.options}}
                                        <label>
                                            <input
                                                name="{{../@key}}[]"
                                                type="checkbox"
                                                value="{{./key}}"
                                                {{#when ../../item ../@key '==' key}}checked{{/when}}
                                            />
                                            {{value}}
                                        </label>
                                    {{/each}}
                                </div>
                            {{/when}}
                            {{#when field.type '===' 'radios'}}
                                <div{{#each field.attributes}} {{@key}}="{{this}}"{{/each}}>
                                    {{#each field.options}}
                                        <label>
                                            <input
                                                name="{{../@key}}"
                                                type="radio"
                                                value="{{./key}}"
                                                {{#when ../../item ../@key '==' key}}checked{{/when}}
                                            />
                                            {{value}}
                                        </label>
                                    {{/each}}
                                </div>
                            {{/when}}
                            {{#when field.type '===' 'file'}}
                                <div
                                    data-do="file-field"
                                    data-name="{{@key}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                >
                                    {{#in ../item @key}}
                                        <h5>Current Files</h5>
                                        <div class="file">
                                            <a
                                                href="{{key @key ../item}}"
                                                target="_blank"
                                            >
                                                {{key @key ../item}}
                                            </a>
                                        </div>
                                    {{/in}}
                                </div>
                            {{/when}}
                            {{#when field.type '===' 'files'}}
                                <div
                                    data-do="file-field"
                                    data-name="{{@key}}"
                                    multiple="1"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                >
                                    {{#in ../item @key}}
                                        <h5>Current Files</h5>
                                        {{#loop ../item @key}}
                                            <div class="file">
                                                <a
                                                    href="{{this}}"
                                                    target="_blank"
                                                >
                                                    {{this}}
                                                </a>
                                            </div>
                                        {{/loop}}
                                    {{/in}}
                                </div>
                            {{/when}}
                            {{#when field.type '===' 'image'}}
                                <div
                                    class="image-field"
                                    data-alt="Change this Photo"
                                    data-do="image-field"
                                    data-name="{{@key}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                >
                                        {{#in ../item @key}}
                                            <input
                                                name="{{@key}}"
                                                type="hidden"
                                                value="{{key @key ../item}}"
                                            />
                                            <img
                                                alt="Change this Photo"
                                                src="{{key @key ../item}}"
                                                width="200"
                                            />
                                        {{else}}
                                            <img
                                                alt="Upload a Photo"
                                                class="placeholder"
                                                src="/images/default-image.png"
                                                width="200"
                                            />
                                        {{/in}}
                                </div>
                            {{/when}}
                            {{#when field.type '===' 'images'}}
                                <div
                                    data-do="image-field"
                                    data-name="{{@key}}"
                                    data-multiple="1"
                                    data-alt="Change this Photo"
                                    class="image-field multiple"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                >
                                    {{#in ../item @key}}
                                        {{#loop ../item @key}}
                                            <input
                                                type="hidden"
                                                name="{{../@key}}[]"
                                                value="{{this}}"
                                            />
                                            <img
                                                alt="Change this Photo"
                                                src="{{this}}"
                                                width="200"
                                            />
                                        {{/loop}}
                                    {{else}}
                                        <img
                                            alt="Upload a Photo"
                                            class="placeholder"
                                            src="/images/default-image.png"
                                            width="200"
                                        />
                                    {{/in}}
                                </div>
                            {{/when}}
                            {{#when field.type '===' 'tag'}}
                                <div
                                    data-do="tag-field"
                                    class="tag-field"
                                    data-name="{{@key}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                >
                                    {{#loop ../item @key}}
                                        <div class="tag">
                                            <input
                                                class="tag-input text-field"
                                                type="text"
                                                name="{{../@key}}[]"
                                                value="{{this}}"
                                            />
                                            <a
                                                class="remove"
                                                href="javascript:void(0)"
                                            >
                                                <i class="fa fa-times"></i>
                                            </a>
                                        </div>
                                    {{/loop}}
                                </div>
                            {{/when}}
                            {{#when field.type '===' 'meta'}}
                                <div
                                    data-do="meta-field"
                                    class="meta-field"
                                    data-name="{{@key}}"
                                    {{#each field.attributes}}
                                        {{@key}}="{{this}}"
                                    {{/each}}
                                >
                                    {{#each item.{NAME}}}
                                        <div class="meta">
                                            <input
                                                class="meta-input key"
                                                placeholder="{{_ 'Name'}}"
                                                type="text"
                                                value="{{@key}}"
                                            />
                                            <input
                                                class="meta-input value"
                                                type="text"
                                                placeholder="{{_ 'Value'}}"
                                                value="{{this}}"
                                            />
                                            <input
                                                name="{NAME}[{{@key}}]"
                                                type="hidden"
                                                value="{{this}}"
                                            />
                                            <a
                                                class="remove"
                                                href="javascript:void(0)"
                                            >
                                                <i class="fa fa-times"></i>
                                            </a>
                                        </div>
                                    {{/each}}
                                </div>
                                <a
                                    class="add-meta"
                                    href="javascript:void(0)"
                                >
                                    <i class="fa fa-plus"></i>
                                </a>
                            {{/when}}
                            {{#when field.type '===' 'multirange'}}
                            {{/when}}
                            {{#when ../errors name '==' 1}}
                                <span class="help-text">{{errors.user_name}}</span>
                            {{/when}}
                        </div>
                    </div>
                {{/in}}
            {{/each}}
            <div class="clear form-group">
                <input type="hidden" name="csrf" value="{{csrf}}" />
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </form>
    </div>
</div>
<script type="text/javascript" src="/scripts/cropper.js"></script>
