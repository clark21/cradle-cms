<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="/admin">
                <i class="fas fa-home"></i> Admin
            </a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">
            <i class="fas fa-{{schema.icon}}"></i> {{schema.plural}}
        </li>
    </ol>
</nav>

<div class="main-padding">
    {{#when filter schema.active '===' '0'}}
        <h3 class="main-title">
            <i class="fa fa-{{schema.icon}}"></i>
            {{number total}} Inactive {{schema.plural}}
            {{#if q.0}}
                matching {{q.0}}
            {{/if}}
        </h3>
    {{else}}
        <h3 class="main-title">
            <i class="fa fa-{{schema.icon}}"></i>
            {{number total}} {{schema.plural}}
            {{#if q.0}}
                matching {{q.0}}
            {{/if}}
        </h3>
    {{/when}}

    {{#if rows.length}}
        <div class="box search-filters">
            <div class="box-head box-default">
                <h3 class="box-title">Filters</h3>
            </div>
            <form method="get">
                <div class="box-body box-padding">
                        <div class="form-group">
                            <label for="q">Search</label>
                            <input class="form-control" name="q" placeholder="Enter Search Terms" type="search" />
                        </div>

                        {{#if schema.filterable.length}}
                            <div class="form-group">
                                <a
                                    data-do="search-filter-toggle"
                                    data-on="click"
                                    data-toggle="collapse"
                                    data-target="#filter-options"
                                >
                                    <span>more</span> <i class="fas fa-caret-down"></i>
                                </a>
                            </div>

                            <div id="filter-options" class="collapse">
                                {{> filters}}
                                <div class="form-group">
                                    <label for="save">Save Filters</label>
                                    <input class="form-control" name="save" placeholder="Enter Filter Name" type="text" />
                                </div>
                            </div>
                        {{/if}}
                </div>
                <div class="box-foot box-light">
                    <div class="box-left">
                        <button class="btn btn-danger" type="reset">Reset</button>
                    </div>
                    <div class="box-right">
                        <button class="btn btn-primary">Search</button>
                    </div>
                </div>
            </form>
        </div>

        <form method="post">
            <div class="clearfix mb-4 search-actions">
                <div class="float-left mr-2">
                    <div class="input-group">
                        <select class="form-control" name="action">
                            <option value="remove">Remove</option>
                            <option value="remove">Restore</option>
                        </select>
                        <button class="btn btn-secondary">Apply</button>
                    </div>
                </div>

                {{#if schema.active}}
                    <div class="btn-group" role="group" aria-label="...">
                        <a class="btn btn-primary" href="?filter[{{schema.active}}]=1">
                            Active
                        </a>
                        <a class="btn btn-danger" href="?filter[{{schema.active}}]=0">
                            Inactive
                        </a>
                    </div>
                {{/if}}

                <div class="float-right">
                    <a
                        class="btn btn-pink"
                        data-do="import"
                        data-on="click"
                        data-url="/admin/system/object/{{schema.name}}/import"
                        href="javascript:void(0)"
                    >
                        <i class="fas fa-upload"></i> Import
                    </a>
                    <a class="btn btn-purple" href="/admin/system/object/{{schema.name}}/export/csv?{{toquery}}" target="_blank">
                        <i class="fas fa-download"></i> Export
                    </a>
                    <a class="btn btn-success" href="/admin/system/object/{{schema.name}}/create">
                        <i class="fas fa-plus"></i> {{_ 'Create %s' schema.singular}}
                    </a>
                </div>
            </div>

            <div class="table-overflow">
                <table class="table table-responsive-sm table-striped table-data">
                    <thead>
                        <tr>
                            <th class="table-bulk-checkbox">
                                <label class="checkbox checkbox-1">
                                    <input
                                        data-do="table-checkall"
                                        type="checkbox"
                                    />
                                    <span></span>
                                </label>
                            </th>
                            <th>Actions</th>
                            {{#each schema.fields}}
                                {{#in @key ../schema.listable}}
                                    {{#in @key ../schema.sortable}}
                                        <th>
                                            <a href="?{{sorturl @key}}">
                                                {{label}}
                                                {{sortcaret @key}}
                                            </a>
                                        </th>
                                    {{else}}
                                        <th>{{label}}</th>
                                    {{/in}}
                                {{/in}}
                            {{/each}}
                        </tr>
                    </thead>
                    <tbody>
                        {{#each rows}}
                            <tr data-id="{{key ../schema.primary this}}">
                                <td class="table-bulk-checkbox">
                                    <label class="checkbox checkbox-1">
                                        <input type="checkbox" name="id[]" value="1" />
                                        <span></span>
                                    </label>
                                </td>
                                <td class="table-actions">
                                    {{#is_active this ../schema}}
                                        <a
                                            title="Edit"
                                            href="/admin/system/object/{{../schema.name}}/update/{{key ../schema.primary this}}"
                                        >
                                            <i class="fa fa-edit"></i>
                                        </a>
                                        <a
                                            title="Remove"
                                            href="/admin/system/object/{{../schema.name}}/remove/{{key ../schema.primary this}}"
                                            class="text-danger remove"
                                        >
                                            <i class="fa fa-times"></i>
                                        </a>
                                    {{else}}
                                        <a
                                            title="Restore"
                                            href="/admin/system/object/{{../schema.name}}/restore/{{key ../schema.primary this}}"
                                            class="text-success restore"
                                        >
                                            <i class="fas fa-external-link-alt"></i>
                                        </a>
                                    {{/is_active}}
                                </td>
                                {{#get_format this ../schema}}
                                    {{#when format '===' 'none'}}
                                        <td>{{value}}</td>
                                    {{/when}}
                                    {{#when format '===' 'lower'}}
                                        <td>{{tolower value}}</td>
                                    {{/when}}
                                    {{#when format '===' 'upper'}}
                                        <td>{{toupper value}}</td>
                                    {{/when}}
                                    {{#when format '===' 'capital'}}
                                        <td>{{capital value}}</td>
                                    {{/when}}
                                    {{#when format '===' 'length'}}
                                        <td>{{char_length value parameters}}</td>
                                    {{/when}}
                                    {{#when format '===' 'words'}}
                                        <td>{{word_length value parameters}}</td>
                                    {{/when}}
                                    {{#when format '===' 'number'}}
                                        <td>{{number value}}</td>
                                    {{/when}}
                                    {{#when format '===' 'price'}}
                                        <td>{{parameters}}{{price value}}</td>
                                    {{/when}}
                                    {{#when format '===' 'yes'}}
                                        <td>{{#if value}}Yes{{else}}No{{/if}}</td>
                                    {{/when}}
                                    {{#when format '===' 'date'}}
                                        <td>
                                            {{#if value}}
                                                {{date value parameters}}
                                            {{else}}
                                                &nbsp;
                                            {{/if}}
                                        </td>
                                    {{/when}}
                                    {{#when format '===' 'relative'}}
                                        <td>
                                            {{#if value}}
                                                {{relative value parameters}}
                                            {{else}}
                                                &nbsp;
                                            {{/if}}
                                        </td>
                                    {{/when}}
                                    {{#when format '===' 'strip'}}
                                        <td>{{strip value parameters}}</td>
                                    {{/when}}
                                    {{#when format '===' 'link'}}
                                        <td><a href="{{parameters.0}}">{{parameters.1}}</a></td>
                                    {{/when}}
                                    {{#when format '===' 'image'}}
                                        <td><img src="{{value}}" width="{{parameters.0}}" height="{{parameters.1}}" /></td>
                                    {{/when}}
                                    {{#when format '===' 'email'}}
                                        <td><a href="mailto:{{value}}">{{parameters}}</a></td>
                                    {{/when}}
                                    {{#when format '===' 'phone'}}
                                        <td><a href="tel:{{value}}">{{parameters}}</a></td>
                                    {{/when}}
                                    {{#when format '===' 'comma'}}
                                        <td>{{implode value ','}}</td>
                                    {{/when}}
                                    {{#when format '===' 'space'}}
                                        <td>{{implode value ' '}}</td>
                                    {{/when}}
                                    {{#when format '===' 'tag'}}
                                        <td>
                                            {{#each value}}
                                                <div class="tag">{{this}}</div>
                                            {{/each}}
                                        </td>
                                    {{/when}}
                                {{/get_format}}
                            </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </form>

        <ul class="pagination">
            {{#pager total range}}
                <li class="page-item {{#if active}} active"{{/if}}>
                    <a class="page-link" href="?{{href}}">{{page}}</a>
                </li>
            {{/pager}}
        </ul>
    {{else}}
        <!-- START: NO RESULTS -->
        <div class="alert alert-info no-results">
            <center>
                No Results Found.<br />
                <a class="btn btn-success" href="/admin/system/object/{{schema.name}}/create">
                    <i class="fas fa-plus"></i> {{_ 'Create %s' schema.singular}}
                </a>
            </center>
        </div>
        <!-- END: NO RESULTS -->
    {{/if}}
</div>
