<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="/admin">
                <i class="fas fa-home"></i> Admin
            </a>
        </li>
        {{#if relation.suggestion}}
            <li class="breadcrumb-item">
                <a href="/admin/system/object/{{relation.schema.name}}/search">
                    <i class="{{relation.schema.icon}}"></i> {{relation.schema.plural}}
                </a>
            </li>
            <li class="breadcrumb-item">
                <a href="/admin/system/object/{{relation.schema.name}}/update/{{key relation.schema.primary relation.data}}">
                    {{relation.suggestion}}
                </a>
            </li>
        {{/if}}
        <li class="breadcrumb-item active" aria-current="page">
            <i class="fas fa-{{schema.icon}}"></i> {{schema.plural}}
        </li>
    </ol>
</nav>

<div class="main-padding">
    {{#when filter schema.active '===' '0'}}
        <h3 class="main-title">
            {{#if relation.suggestion}}
                <i class="{{relation.schema.icon}}"></i>
                {{relation.suggestion}}
                <i class="fas fa-arrow-right"></i>
            {{/if}}
            <i class="fa fa-{{schema.icon}}"></i>
            {{number total}} Inactive {{schema.plural}}
            {{#if q.0}}
                matching {{q.0}}
            {{/if}}
        </h3>
    {{else}}
        <h3 class="main-title">
            {{#if relation.suggestion}}
                <i class="{{relation.schema.icon}}"></i>
                {{relation.suggestion}}
                <i class="fas fa-arrow-right"></i>
            {{/if}}
            <i class="fa fa-{{schema.icon}}"></i>
            {{number total}} {{schema.plural}}
            {{#if q.0}}
                matching {{q.0}}
            {{/if}}
        </h3>
    {{/when}}

    {{#if rows.length}}
        <div class="box search-filters">
            <div class="box-head box-default">
                <h3 class="box-title">Filters</h3>
            </div>
            <form method="get">
                <div class="box-body box-padding">
                        <div class="form-group">
                            <label for="q">Search</label>
                            <input
                                class="form-control"
                                name="q"
                                placeholder="Enter Search Terms"
                                type="search"
                                value="{{q}}"
                            />
                        </div>

                        {{#if schema.filterable.length}}
                            <div class="form-group">
                                <a
                                    data-do="search-filter-toggle"
                                    data-on="click"
                                    data-toggle="collapse"
                                    data-target="#filter-options"
                                >
                                    <span>more</span> <i class="fas fa-caret-down"></i>
                                </a>
                            </div>

                            <div id="filter-options" class="collapse">
                                {{> object_filters}}
                                <div class="form-group">
                                    <label for="save">Save Filters</label>
                                    <input class="form-control" name="save" placeholder="Enter Filter Name" type="text" />
                                </div>
                            </div>
                        {{/if}}
                </div>
                <div class="box-foot box-light">
                    <div class="box-left">
                        <button class="btn btn-danger" type="reset">Reset</button>
                    </div>
                    <div class="box-right">
                        <button class="btn btn-primary">Search</button>
                    </div>
                </div>
            </form>
        </div>

        <form method="post">
            <div class="clearfix mb-4 search-actions">
                <div class="float-left mr-2">
                    <div class="input-group">
                        <select class="form-control" name="bulk-action">
                            <option value="remove">Remove</option>
                            <option value="restore">Restore</option>
                        </select>
                        <button class="btn btn-secondary">Apply</button>
                    </div>
                </div>

                {{#if schema.active}}
                    <div class="btn-group" role="group" aria-label="...">
                        <a class="btn btn-primary" href="?filter[{{schema.active}}]=1">
                            Active
                        </a>
                        <a class="btn btn-danger" href="?filter[{{schema.active}}]=0">
                            Inactive
                        </a>
                    </div>
                {{/if}}

                <div class="float-right">
                    <a
                        class="btn btn-pink"
                        data-do="import"
                        data-on="click"
                        data-url="import"
                        href="javascript:void(0)"
                    >
                        <i class="fas fa-upload"></i> Import
                    </a>
                    <a class="btn btn-purple" href="export/csv?{{toquery}}" target="_blank">
                        <i class="fas fa-download"></i> Export
                    </a>
                    {{#if relation.suggestion}}
                        <a class="btn btn-success" href="/admin/system/object/{{schema.name}}/create/{{relation.schema.name}}/{{key relation.schema.primary relation.data}}">
                            <i class="fas fa-plus"></i> {{_ 'Create %s' schema.singular}}
                        </a>
                    {{else}}
                        <a class="btn btn-success" href="/admin/system/object/{{schema.name}}/create">
                            <i class="fas fa-plus"></i> {{_ 'Create %s' schema.singular}}
                        </a>
                    {{/if}}
                </div>
            </div>

            <div class="table-overflow">
                <table class="table table-responsive-sm table-striped table-data">
                    <thead>
                        <tr>
                            <th class="table-bulk-checkbox">
                                <label class="checkbox checkbox-1">
                                    <input
                                        data-do="table-checkall"
                                        type="checkbox"
                                    />
                                    <span></span>
                                </label>
                            </th>
                            <th>Actions</th>
                            <th>ID</th>
                            {{#each schema.fields}}
                                {{#in @key ../schema.listable}}
                                    {{#in @key ../schema.sortable}}
                                        <th>
                                            <a href="?{{sorturl @key}}">
                                                {{label}}
                                                {{sortcaret @key}}
                                            </a>
                                        </th>
                                    {{else}}
                                        <th>{{label}}</th>
                                    {{/in}}
                                {{/in}}
                            {{/each}}
                        </tr>
                    </thead>
                    <tbody>
                        {{#each rows}}
                            <tr data-id="{{key ../schema.primary this}}">
                                <td class="table-bulk-checkbox">
                                    <label class="checkbox checkbox-1">
                                        <input type="checkbox" name="{{../schema.primary}}[]" value="{{key ../schema.primary this}}" />
                                        <span></span>
                                    </label>
                                </td>
                                <td class="table-actions">
                                    {{#is_active this ../schema}}
                                        <a
                                            class="text-grey"
                                            href="/admin/system/object/{{../schema.name}}/update/{{key ../schema.primary this}}"
                                            title="Edit {{../schema.singular}}"
                                        >
                                            <i class="fa fa-edit"></i>
                                        </a>

                                        {{#each ../schema.relations}}
                                            {{#when many '==' 2}}
                                                <a
                                                    class="text-info"
                                                    title="View {{plural}}"
                                                    href="/admin/system/object/{{name}}/search/{{../../schema.name}}/{{key ../../schema.primary ../this}}"
                                                >
                                                    <i class="{{icon}}"></i>
                                                </a>
                                                <a
                                                    class="text-success"
                                                    title="Create {{plural}}"
                                                    href="/admin/system/object/{{name}}/create/{{../../schema.name}}/{{key ../../schema.primary ../this}}"
                                                >
                                                    <i class="{{icon}}"></i>
                                                </a>
                                            {{/when}}
                                        {{/each}}

                                        <a
                                            class="text-danger remove"
                                            href="/admin/system/object/{{../schema.name}}/remove/{{key ../schema.primary this}}"
                                            title="Remove {{../schema.singular}}"
                                        >
                                            <i class="fa fa-times"></i>
                                        </a>
                                    {{else}}
                                        <a
                                            class="text-success restore"
                                            href="/admin/system/object/{{../schema.name}}/restore/{{key ../schema.primary this}}"
                                            title="Restore {{../schema.singular}}"
                                        >
                                            <i class="fas fa-external-link-alt"></i>
                                        </a>
                                    {{/is_active}}
                                </td>
                                <td>{{key ../schema.primary this}}</td>
                                {{#get_format this ../schema}}
                                    {{#when format '===' 'none'}}
                                        {{#in name ../../schema.filterable}}
                                            <td>
                                                <a href="?{{filtertoquery name value}}">
                                                    {{value}}
                                                </a>
                                            </td>
                                        {{else}}
                                            <td>{{value}}</td>
                                        {{/in}}
                                    {{/when}}
                                    {{#when format '===' 'lower'}}
                                        {{#in name ../../schema.filterable}}
                                            <td>
                                                <a href="?{{filtertoquery name value}}">
                                                    {{tolower value}}
                                                </a>
                                            </td>
                                        {{else}}
                                            <td>{{tolower value}}</td>
                                        {{/in}}
                                    {{/when}}
                                    {{#when format '===' 'upper'}}
                                        {{#in name ../../schema.filterable}}
                                            <td>
                                                <a href="?{{filtertoquery name value}}">
                                                    {{toupper value}}
                                                </a>
                                            </td>
                                        {{else}}
                                            <td>{{toupper value}}</td>
                                        {{/in}}
                                    {{/when}}
                                    {{#when format '===' 'capital'}}
                                        {{#in name ../../schema.filterable}}
                                            <td>
                                                <a href="?{{filtertoquery name value}}">
                                                    {{capital value}}
                                                </a>
                                            </td>
                                        {{else}}
                                            <td>{{capital value}}</td>
                                        {{/in}}
                                    {{/when}}
                                    {{#when format '===' 'length'}}
                                        <td>{{char_length value parameters}}</td>
                                    {{/when}}
                                    {{#when format '===' 'words'}}
                                        <td>{{word_length value parameters}}</td>
                                    {{/when}}
                                    {{#when format '===' 'number'}}
                                        <td>{{number value}}</td>
                                    {{/when}}
                                    {{#when format '===' 'price'}}
                                        <td>{{price value}}</td>
                                    {{/when}}
                                    {{#when format '===' 'yes'}}
                                        {{#in name ../../schema.filterable}}
                                            <td>
                                                <a href="?{{filtertoquery name value}}">
                                                    {{#if value}}Yes{{else}}No{{/if}}
                                                </a>
                                            </td>
                                        {{else}}
                                            <td>{{#if value}}Yes{{else}}No{{/if}}</td>
                                        {{/in}}
                                    {{/when}}
                                    {{#when format '===' 'date'}}
                                        <td>
                                            {{#if value}}
                                                {{date value parameters}}
                                            {{else}}
                                                &nbsp;
                                            {{/if}}
                                        </td>
                                    {{/when}}
                                    {{#when format '===' 'relative'}}
                                        <td>
                                            {{#if value}}
                                                {{relative value parameters}}
                                            {{else}}
                                                &nbsp;
                                            {{/if}}
                                        </td>
                                    {{/when}}
                                    {{#when format '===' 'strip'}}
                                        <td>{{strip value parameters}}</td>
                                    {{/when}}
                                    {{#when format '===' 'link'}}
                                        <td><a href="{{compile parameters.0 ../this}}">{{compile parameters.1 ../this}}</a></td>
                                    {{/when}}
                                    {{#when format '===' 'image'}}
                                        <td><img src="{{value}}" width="{{parameters.0}}" height="{{parameters.1}}" /></td>
                                    {{/when}}
                                    {{#when format '===' 'email'}}
                                        <td><a href="mailto:{{value}}">{{compile parameters ../this}}</a></td>
                                    {{/when}}
                                    {{#when format '===' 'phone'}}
                                        <td><a href="tel:{{value}}">{{compile parameters ../this}}</a></td>
                                    {{/when}}
                                    {{#when format '===' 'comma'}}
                                        <td>{{implode value ','}}</td>
                                    {{/when}}
                                    {{#when format '===' 'space'}}
                                        <td>{{implode value ' '}}</td>
                                    {{/when}}
                                    {{#when format '===' 'tag'}}
                                        <td>
                                            {{#each value}}
                                                <div class="tag">{{this}}</div>
                                            {{/each}}
                                        </td>
                                    {{/when}}
                                {{/get_format}}
                            </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </form>

        <ul class="pagination">
            {{#pager total range}}
                <li class="page-item{{#if active}} active{{/if}}">
                    <a class="page-link" href="?{{href}}">{{page}}</a>
                </li>
            {{/pager}}
        </ul>
    {{else}}
        <div class="clearfix mb-4 search-actions">
            {{#if schema.active}}
                <div class="btn-group" role="group" aria-label="...">
                    <a class="btn btn-primary" href="?filter[{{schema.active}}]=1">
                        Active
                    </a>
                    <a class="btn btn-danger" href="?filter[{{schema.active}}]=0">
                        Inactive
                    </a>
                </div>
            {{/if}}

            <div class="float-right">
                <a
                    class="btn btn-pink"
                    data-do="import"
                    data-on="click"
                    data-url="import"
                    href="javascript:void(0)"
                >
                    <i class="fas fa-upload"></i> Import
                </a>
                <a class="btn btn-purple" href="export/csv?{{toquery}}" target="_blank">
                    <i class="fas fa-download"></i> Export
                </a>
                {{#if relation.suggestion}}
                    <a class="btn btn-success" href="/admin/system/object/{{schema.name}}/create/{{relation.schema.name}}/{{key relation.schema.primary relation.data}}">
                        <i class="fas fa-plus"></i> {{_ 'Create %s' schema.singular}}
                    </a>
                {{else}}
                    <a class="btn btn-success" href="/admin/system/object/{{schema.name}}/create">
                        <i class="fas fa-plus"></i> {{_ 'Create %s' schema.singular}}
                    </a>
                {{/if}}
            </div>
        </div>

        <!-- START: NO RESULTS -->
        <div class="alert alert-info no-results">
            <center>No Results Found.</center>
        </div>
        <!-- END: NO RESULTS -->
    {{/if}}
</div>
